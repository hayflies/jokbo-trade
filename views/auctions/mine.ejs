<%- include('../partials/header', { title: '내 경매' }) %>
<section class="card">
  <header class="card-header">
    <h2>내가 진행 중인 경매</h2>
  </header>
  <div class="grid">
    <% if (!openAuctions.length) { %>
    <p class="muted">진행 중인 나의 경매가 없습니다.</p>
    <% } %>
    <% openAuctions.forEach(function (auction) { %>
    <article class="card auction-card" data-auction-id="<%= auction.id %>">
      <h3><a href="/auctions/<%= auction.id %>"><%= auction.title %></a></h3>
      <p>현재가: <span class="price">₩<%= auction.currentPrice.toLocaleString('ko-KR') %></span></p>
      <p>입찰 수: <span class="bid-count"><%= auction.bids.length %></span></p>
      <p>마감: <time datetime="<%= auction.endTime.toISOString() %>"><%= auction.endTime.toLocaleString('ko-KR') %></time></p>
      <span class="status-badge status-open">진행 중</span>
      <a class="btn-secondary" href="/auctions/<%= auction.id %>">상세보기</a>
    </article>
    <% }); %>
  </div>
</section>

<section class="card">
  <header class="card-header">
    <h2>완료된 나의 경매</h2>
  </header>
  <div class="grid">
    <% if (!closedAuctions.length) { %>
    <p class="muted">완료된 나의 경매 내역이 없습니다.</p>
    <% } %>
    <% closedAuctions.forEach(function (auction) { %>
    <article class="card auction-card auction-card--closed" data-auction-id="<%= auction.id %>">
      <h3><a href="/auctions/<%= auction.id %>"><%= auction.title %></a></h3>
      <p>낙찰가: <span class="price">₩<%= (auction.winningBidAmount || auction.currentPrice).toLocaleString('ko-KR') %></span></p>
      <p>낙찰자: <%= auction.winnerNickname ? auction.winnerNickname : '낙찰자 없음' %></p>
      <p>종료: <time datetime="<%= (auction.closedAt || auction.endTime).toISOString() %>"><%= (auction.closedAt || auction.endTime).toLocaleString('ko-KR') %></time></p>
      <span class="status-badge status-closed">종료</span>
      <a class="btn-secondary" href="/auctions/<%= auction.id %>">상세보기</a>
    </article>
    <% }); %>
  </div>
</section>
<%- include('../partials/footer') %>
